{% doc %}
  @prompt
    Create a split-layout block titled “Why we love the [Product Name]”. The block should have:
Left Section:

A large, full-height lifestyle image showcasing the product.
Allow merchants to upload and replace the image easily.
Right Section:

A vertical stack of three (2) image tiles.
Each tile must include:
An image (editable)
A caption text below the image (editable individually)
Optional: Add a subtle border and padding for neat alignment.
Allow merchants to:
Upload/change each tile’s image
Edit the caption text per tile via custom inputs
Set a consistent font style and size for all tile captions
Block-Wide Controls:

Editable main heading text (e.g. “Why we love the Dubai Feather Cloud”)
Responsive layout: stack vertically on mobile (image on top, tiles below)
Option to change spacing between elements and background colour
Clean, modern design with centred alignment of tile text, Make the left column take up 60% of the page width


{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .split-layout-{{ ai_gen_id }} {
    display: flex;
    flex-direction: row;
    background-color: {{ block.settings.background_color }};
    padding: {{ block.settings.padding }}px;
    gap: {{ block.settings.gap }}px;
  }

  .split-layout__left-{{ ai_gen_id }} {
    flex: 6; /* Changed from 1 to 6 to make it 60% */
    min-width: 0;
  }

  .split-layout__right-{{ ai_gen_id }} {
    flex: 4; /* Changed from 1 to 4 to make it 40% */
    display: flex;
    flex-direction: column;
    gap: {{ block.settings.tile_gap }}px;min-width: 0;
  }

  .split-layout__main-image-container-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden;}

  .split-layout__main-image-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .split-layout__main-image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .split-layout__main-image-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    background-color: #f4f4f4;
  }

  .split-layout__heading-{{ ai_gen_id }} {
    text-align: center;
    margin-top: 0;
    margin-bottom: {{ block.settings.heading_margin }}px;
    font-size: {{ block.settings.heading_size }}px;
    color: {{ block.settings.heading_color }};
  }

  .split-layout__tile-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    border: {{ block.settings.tile_border_width }}px solid {{ block.settings.tile_border_color }};
    border-radius: {{ block.settings.tile_border_radius }}px;
    overflow: hidden;
    flex: 1;}

  .split-layout__tile-image-container-{{ ai_gen_id }} {
    width: 100%;
    aspect-ratio: {{ block.settings.tile_aspect_ratio }};
    overflow: hidden;
  }

  .split-layout__tile-image-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .split-layout__tile-image-placeholder-{{ ai_gen_id }} {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .split-layout__tile-image-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    background-color: #f4f4f4;
  }

  .split-layout__tile-caption-{{ ai_gen_id }} {
    padding: {{ block.settings.tile_caption_padding }}px;
    text-align: center;
    font-size: {{ block.settings.caption_font_size }}px;
    color: {{ block.settings.caption_color }};
  }

  @media screen and (max-width: 749px) {
    .split-layout-{{ ai_gen_id }} {
      flex-direction: column;
    }

    .split-layout__main-image-container-{{ ai_gen_id }} {
      aspect-ratio: {{ block.settings.mobile_main_image_aspect_ratio }};
    }

    .split-layout__heading-{{ ai_gen_id }} {
      font-size: {{ block.settings.heading_size_mobile }}px;
    }
  }
{% endstyle %}

<div class="split-layout-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="split-layout__left-{{ ai_gen_id }}">
    <div class="split-layout__main-image-container-{{ ai_gen_id }}">
      {% if block.settings.main_image %}
        <img 
          src="{{ block.settings.main_image | image_url: width: 1500 }}" 
          alt="{{ block.settings.main_image.alt | escape }}"
          loading="lazy"
          class="split-layout__main-image-{{ ai_gen_id }}"
          width="{{ block.settings.main_image.width }}"
          height="{{ block.settings.main_image.height }}"
        >
      {% else %}
        <div class="split-layout__main-image-placeholder-{{ ai_gen_id }}">
          {{ 'image' | placeholder_svg_tag }}
        </div>
      {% endif %}
    </div>
  </div>
  <div class="split-layout__right-{{ ai_gen_id }}"><h2 class="split-layout__heading-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
    
    {% for i in (1..2) %}
      {% assign image_setting = 'tile_image_' | append: i %}
      {% assign caption_setting = 'tile_caption_' | append: i %}
      
      <div class="split-layout__tile-{{ ai_gen_id }}">
        <div class="split-layout__tile-image-container-{{ ai_gen_id }}">
          {% if block.settings[image_setting] %}
            <img 
              src="{{ block.settings[image_setting] | image_url: width: 800 }}" 
              alt="{{ block.settings[image_setting].alt | escape }}"
              loading="lazy"
              class="split-layout__tile-image-{{ ai_gen_id }}"
              width="{{ block.settings[image_setting].width }}"
              height="{{ block.settings[image_setting].height }}"
            >
          {% else %}
            <div class="split-layout__tile-image-placeholder-{{ ai_gen_id }}">
              {{ 'image' | placeholder_svg_tag }}
            </div>
          {% endif %}
        </div>
        <div class="split-layout__tile-caption-{{ ai_gen_id }}">
          {{ block.settings[caption_setting] }}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Why We Love It",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Why we love the [Product Name]"
    },
    {
      "type": "image_picker",
      "id": "main_image",
      "label": "Main lifestyle image"
    },
    {
      "type": "header",
      "content": "Tile1"
    },
    {
      "type": "image_picker",
      "id": "tile_image_1",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "tile_caption_1",
      "label": "Caption",
      "default": "Feature highlight1"
    },
    {
      "type": "header",
      "content": "Tile 2"
    },
    {
      "type": "image_picker",
      "id": "tile_image_2",
      "label": "Image"
    },
    {
      "type": "text",
      "id": "tile_caption_2",
      "label": "Caption",
      "default": "Feature highlight2"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "padding",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Block padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "gap",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Space between columns",
      "default": 20
    },
    {
      "type": "range",
      "id": "tile_gap",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "label": "Space between tiles",
      "default": 16
    },
    {
      "type": "range",
      "id": "heading_margin",
      "min": 0,
      "max": 40,
      "step": 4,
      "unit": "px",
      "label": "Space below heading",
      "default": 20
    },
    {
      "type": "select",
      "id": "tile_aspect_ratio",
      "label": "Tile image aspect ratio",
      "options": [
        {
          "value": "1",
          "label": "1:1 (Square)"
        },
        {
          "value": "1.33",
          "label": "4:3"
        },
        {
          "value": "1.78",
          "label": "16:9"
        }
      ],
      "default": "1.33"
    },
    {
      "type": "select",
      "id": "mobile_main_image_aspect_ratio",
      "label": "Mobile main image aspect ratio",
      "options": [
        {
          "value": "1",
          "label": "1:1 (Square)"
        },
        {
          "value": "1.33",
          "label": "4:3"
        },
        {
          "value": "1.78",
          "label": "16:9"
        }
      ],
      "default": "1.33"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#121212"
    },
    {
      "type": "color",
      "id": "caption_color",
      "label": "Caption color",
      "default": "#121212"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 16,
      "max": 60,
      "step": 2,
      "unit": "px",
      "label": "Heading size",
      "default": 32
    },
    {
      "type": "range",
      "id": "heading_size_mobile",
      "min": 16,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Heading size (mobile)",
      "default": 24
    },
    {
      "type": "range",
      "id": "caption_font_size",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Caption font size",
      "default": 16
    },
    {
      "type": "header",
      "content": "Tile Style"
    },
    {
      "type": "range",
      "id": "tile_border_width",
      "min": 0,
      "max": 5,
      "step": 1,
      "unit": "px",
      "label": "Tile border width",
      "default": 1
    },
    {
      "type": "color",
      "id": "tile_border_color",
      "label": "Tile border color",
      "default": "#e0e0e0"
    },
    {
      "type": "range",
      "id": "tile_border_radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Tile border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "tile_caption_padding",
      "min": 8,
      "max": 32,
      "step": 2,
      "unit": "px",
      "label": "Caption padding",
      "default": 16
    }
  ],
  "presets": [
    {
      "name": "Why We Love It"
    }
  ]
}
{% endschema %}