{%- liquid
    capture icon_arrow_list
        render 'icon-arrow-list'
    endcapture
-%}
<div class="coll-w-pro spacing spacing-xs color-{{ section.settings.color_scheme }} gradient"
    style="
    --padding-top: {{ section.settings.padding_top }}px;
    --padding-bottom: {{ section.settings.padding_bottom }}px;
    --padding-top-xs: {{ section.settings.padding_top_mobile }}px;
    --padding-bottom-xs: {{ section.settings.padding_bottom_mobile }}px;
    "
>
    <div class="{{ section.settings.section_width }} m-auto{% if section.settings.section_width == 'full-width' %} p-banner{% endif %}"{% if section.settings.section_width == 'customized-width' %} style="--page-width: {{ section.settings.customize_width }}px;"{% endif %}>
        <div class="coll-w-pro__swiperbox">
            <slideshow-component class="coll-w-pro__slide d-block{% if section.settings.carousel_infinite_scroll %}{% if section.blocks.size > 1 %} infinite-scroll{% endif %}{% endif %}"
                data-type-pagination="{{ section.settings.pagination_type }}"
                data-speed="{{ section.settings.change_slides_speed }}"
                data-duration="{{ section.settings.change_slides_duration | times: 1000 }}"
            >
                <div role="region" aria-roledescription="{{ 'sections.slideshow.carousel' | t }}" aria-label="{{ section.settings.accessibility_info | escape }}" class="swiper slider">
                    <div class="swiper-wrapper" style="--mi-h: {{ section.settings.slide_height }}vh;">
                        {%- for block in section.blocks -%}
                            {%- liquid
                                assign products = block.settings.product_list | default: block.settings.collection.products
                                for product in products limit: 1
                                    assign check_product = forloop.index
                                endfor
                            -%}
                            <div class="swiper-slide slider__item slider__item--{{ forloop.index }} scroll-s-start banner__media-hover"
                                role="group"
                                aria-roledescription="Slide"
                                aria-label="{{ 'accessibility.slide' | t: index: forloop.index, total: forloop.length }}"
                                tabindex="-1"
                                id="Slide-{{ section.id }}-{{ forloop.index }}"
                                style="--media-opacity: {{ block.settings.image_overlay_opacity | divided_by: 100.0 }};
                                    --color-opacity: {{ block.settings.color_overlay_opacity.red }},{{ block.settings.color_overlay_opacity.green }},{{ block.settings.color_overlay_opacity.blue }};" 
                                {{ block.shopify_attributes }}
                            >
                                <div class="item pos-relative o-h h-100">
                                    {%- liquid
                                        assign heading = block.settings.heading | default: block.settings.collection.title
                                        assign description = block.settings.description | default: block.settings.collection.description
                                        assign image_src = block.settings.image | default: block.settings.collection.image
                                        assign image_width = block.settings.image.width | default: block.settings.collection.image.width
                                        assign image_height = block.settings.image.height | default: block.settings.collection.image.height
                                        assign button_link = block.settings.button_link | default: block.settings.collection.url
                                    -%}
                                    <div class="item-banner h-100 rounded-ovh" data-swiper-parallax="40%">
                                        {%- if block.settings.image != blank or block.settings.collection.image != blank -%}
                                            <img srcset="{{ image_src | image_url }} {{ block.settings.collection.image.width }}w"
                                                class="w-100 h-100 o-f-cover motion-reduce"
                                                src="{{ image_src | image_url: width: 750 }}"
                                                sizes="(min-width: {{ settings.page_width }}px) {{ settings.page_width | minus: 100 | divided_by: 2 }}px, (min-width: 750px) calc(50vw - 130px), calc(50vw - 55px)"
                                                alt="{{ block.settings.collection.image.alt | default: block.settings.collection.title }}"
                                                width="{{ image_width }}"
                                                height="{{ image_height }}"
                                                loading="lazy"
                                            >
                                        {%- else -%}
                                            {{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg w-100 h-100' }}
                                        {%- endif -%}
                                    </div>
                                    <div class="item-content pos-absolute top-0 left-0 w-100 h-100 d-flex j-c-between a-i-start z-index-2{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
                                        {%- for product in products limit: 1 -%}
                                            <div class="item-product color-{{ section.settings.color_scheme_product }}" data-swiper-parallax="-100%">
                                                {% render 'card-product',
                                                    card_product: product,
                                                    media_aspect_ratio: settings.card_image_ratio,
                                                    show_secondary_image: settings.show_secondary_image,
                                                    show_vendor: settings.show_vendor_product,
                                                    show_vendor_mobile: settings.show_vendor_mobile,
                                                    show_rating: settings.show_rating_product,
                                                    show_rating_mobile: settings.show_rating_mobile,
                                                    show_quick_add: settings.enable_quick_add,
                                                    show_quick_add_mobile: settings.enable_quick_add_mobile,
                                                    show_swatch: settings.show_swatch,
                                                    show_swatch_mobile: settings.show_swatch_mobile,
                                                    show_wishlist: settings.show_wishlist,
                                                    show_wishlist_mobile: settings.show_wishlist_mobile,
                                                    card_button_text_size: settings.card_button_text_size,
                                                    card_button_type: 'default',
                                                    card_button_transform: settings.card_button_transform,
                                                    index: forloop.index,
                                                    section_id: section.id,
                                                    check_color: true,
                                                    class_card: ' data__media-hover'
                                                %}
                                            </div>
                                        {%- endfor -%}
                                        <div class="item-textbox {{ block.settings.text_alignment }}">
                                            <h2 class="item-textbox__heading {{ section.settings.heading_font | prepend: 'typography-' }} {{ section.settings.heading_size | prepend: 'heading-size-' }} m-0 pos-relative o-h splitting--chars data__media-hover" data-splitting="chars">
                                                {{ heading | escape }}
                                            </h2>
                                            <div class="item-textbox__button data__media-hover">
                                                <a {% if button_link == blank %}role="link" aria-disabled="true"{% else %}href="{{ button_link }}"{% endif %}
                                                    class="button text-size-medium{% if block.settings.button_transparent == 'transparent' %} button--transparent{% endif %} {{ settings.button_type | prepend: 'button--main-' }} {{ settings.button_icon | prepend: 'button--icon-' }} {{ settings.button_style | prepend: 'button--style-' }}"
                                                    aria-label="{{ block.settings.button_label }}"
                                                >
                                                    <span class="text">{{ block.settings.button_label | escape }}</span>
                                                    {% render 'button-main-style' %}
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {%- endfor -%}
                    </div>
                    <div class="carousel__controls arrow-style-{{ settings.arrow_style }} no-js-hidden">
                        {%- if section.settings.arrows_type != 'none' and settings.arrow_style == 'modern-plus' -%}
                            <div class="box-arrow pos-relative d-flex a-i-center swiper-screen__{{ section.settings.arrows_type }}">
                        {%- endif -%}
                            {%- if section.settings.arrows_type != 'none' -%}
                                <button type="button" data-step="1" class="button-slider button-slider__prev swiper-screen__{{ section.settings.arrows_type }} button-slider__hover color-arrow t-button b-none c-pointer pos-absolute z-index-2 b-circle p-0 d-flex a-i-center j-c-center swiper-button-prev" aria-label="{{ 'accessibility.previous_slide' | t }}" aria-controls="Slider-{{ section.id }}" name="previous">
                                    {{ icon_arrow_list }}
                                </button>
                                <button type="button" data-step="1" class="button-slider button-slider__next swiper-screen__{{ section.settings.arrows_type }} button-slider__hover color-arrow t-button b-none c-pointer pos-absolute z-index-2 b-circle p-0 d-flex a-i-center j-c-center swiper-button-next" aria-label="{{ 'accessibility.next_slide' | t }}" aria-controls="Slider-{{ section.id }}" name="next">
                                    {{ icon_arrow_list }}
                                </button>
                            {%- endif -%}
                        {%- if section.settings.arrows_type != 'none' and settings.arrow_style == 'modern-plus' -%}
                                <div class="mask-overlay pos-absolute top-0 left-0"></div>
                            </div>
                        {%- endif -%}
                        <div class="swiper-pagination swiper-screen__{{ section.settings.enable_pagination_type }} pos-relative" ></div>
                    </div>
                </div>
            </slideshow-component>
        </div>
    </div>
</div>

{% schema %}
{
    "name": "t:sections.collection-w-product.name",
    "tag": "section",
    "class": "section o-h pos-relative",
    "disabled_on": {
        "groups": ["header", "footer", "custom.popup"]
    },
    "settings": [
    {
        "type": "select",
        "id": "section_width",
        "options": [
        {
            "value": "full-width",
            "label": "t:sections.all.section_width.options__1"
        },
        {
            "value": "page-width",
            "label": "t:sections.all.section_width.options__2"
        },
        {
            "value": "customized-width",
            "label": "t:sections.all.section_width.options__3"
        }],
        "default": "full-width",
        "label": "t:sections.all.section_width.label"
    },
    {
        "type": "range",
        "id": "customize_width",
        "min": 1000,
        "max": 1800,
        "step": 50,
        "default": 1800,
        "unit": "px",
        "label": "t:sections.all.customize_width.label"
    },
    {
        "type": "header",
        "content": "t:sections.slideshow.blocks.slide.label"
    },
    {
        "type": "select",
        "id": "heading_font",
        "options": [
        {
            "value": "font-heading",
            "label": "t:settings_schema.global.settings.typography_style.options__1"
        },
        {
            "value": "font-body",
            "label": "t:settings_schema.global.settings.typography_style.options__2"
        }],
        "default": "font-heading",
        "label": "t:settings_schema.global.settings.typography_style.label"
    },
    {
        "type": "select",
        "id": "heading_size",
        "options": [
        {
            "value": "default",
            "label": "t:sections.all.font_size.options"
        },
        {
            "value": "xx-small",
            "label": "t:sections.all.font_size.options__1"
        },
        {
            "value": "x-small",
            "label": "t:sections.all.font_size.options__2"
        },
        {
            "value": "small",
            "label": "t:sections.all.font_size.options__3"
        },
        {
            "value": "medium",
            "label": "t:sections.all.font_size.options__4"
        },
        {
            "value": "large",
            "label": "t:sections.all.font_size.options__5"
        },
        {
            "value": "x-large",
            "label": "t:sections.all.font_size.options__6"
        },
        {
            "value": "xx-large",
            "label": "t:sections.all.font_size.options__7"
        },
        {
            "value": "xxx-large",
            "label": "t:sections.all.font_size.options__8"
        }],
        "default": "default",
        "label": "t:sections.all.font_size.label__2"
    },
    {
        "type": "range",
        "id": "slide_height",
        "min": 70,
        "max": 100,
        "step": 1,
        "default": 70,
        "unit": "%",
        "info": "t:sections.slideshow.settings.slide_height.info",
        "label": "t:sections.slideshow.settings.slide_height.label"
    },
    {
        "type": "header",
        "content": "t:sections.all.product.header.content"
    },
    {
        "type": "color_scheme",
        "id": "color_scheme_product",
        "label": "t:sections.all.colors.label",
        "default": "background-1"
    },
    {
        "type": "header",
        "content": "t:settings_schema.colors.name"
    },
    {
        "type": "color_scheme",
        "id": "color_scheme",
        "label": "t:sections.all.colors.label",
        "default": "background-1"
    },
    {
        "type": "header",
        "content": "t:sections.all.carousel.label"
    },
    {
        "type": "range",
        "id": "change_slides_speed",
        "min": 3,
        "max": 10,
        "step": 1,
        "unit": "s",
        "label": "t:sections.all.change_slides_speed.label",
        "default": 5
    },
    {
        "type": "range",
        "id": "change_slides_duration",
        "min": 0.8,
        "max": 4,
        "step": 0.2,
        "unit": "s",
        "label": "t:sections.all.change_slides_duration.label",
        "default": 1
    },
    {
        "type": "select",
        "id": "arrows_type",
        "options": [
        {
            "value": "none",
            "label": "t:sections.all.carousel.arrows.options"
        },
        {
            "value": "all",
            "label": "t:sections.all.carousel.arrows.options__1"
        },
        {
            "value": "lg",
            "label": "t:sections.all.carousel.arrows.options__2"
        },
        {
            "value": "md",
            "label": "t:sections.all.carousel.arrows.options__3"
        },
        {
            "value": "sm",
            "label": "t:sections.all.carousel.arrows.options__4"
        },
        {
            "value": "xs",
            "label": "t:sections.all.carousel.arrows.options__5"
        }],
        "default": "all",
        "label": "t:sections.all.carousel.arrows.label"
    },
    {
        "type": "checkbox",
        "id": "carousel_infinite_scroll",
        "default": true,
        "label": "t:sections.all.carousel.heading_1",
        "info": "t:sections.all.carousel.info__1"
    },
    {
        "type": "header",
        "content": "t:sections.all.padding.section_padding_heading"
    },
    {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "t:sections.all.padding.padding_top",
        "default": 50
    },
    {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "t:sections.all.padding.padding_bottom",
        "default": 50
    },
    {
        "type": "range",
        "id": "padding_top_mobile",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "t:sections.all.padding.padding_top_mobile",
        "default": 40
    },
    {
        "type": "range",
        "id": "padding_bottom_mobile",
        "min": 0,
        "max": 100,
        "step": 1,
        "unit": "px",
        "label": "t:sections.all.padding.padding_bottom_mobile",
        "default": 40
    }],
    "blocks": [
    {
        "type": "slide",
        "name": "t:sections.slideshow.blocks.slide.name",
        "limit": 5,
        "settings": [
        {
            "type": "collection",
            "id": "collection",
            "label": "t:sections.all.collection.label"
        },
        {
            "type": "image_picker",
            "id": "image",
            "label": "t:sections.all.image.label",
            "info": "Replaces collection image when selected."
        },
        {
            "type": "image_picker",
            "id": "mobile_image",
            "label": "t:sections.all.mobile_image.label"
        },
        {
            "type": "header",
            "content": "t:sections.slideshow.blocks.slide.label"
        },
        {
            "type": "text",
            "id": "heading",
            "label": "t:sections.all.heading.label"
        },
        {
            "type": "select",
            "id": "button_transparent",
            "options": [
            {
                "value": "default",
                "label": "t:sections.all.button_style.label__2"
            },
            {
                "value": "transparent",
                "label": "t:sections.all.button_style.label__3"
            }],
            "default": "transparent",
            "label": "t:sections.all.button_style.label__1"
        },
        {
            "type": "text",
            "id": "button_label",
            "default": "Button label",
            "label": "t:sections.all.button_label.label"
        },
        {
            "type": "url",
            "id": "button_link",
            "label": "t:sections.all.link_url.label"
        },
        {
            "type": "text_alignment",
            "id": "text_alignment",
            "label": "t:sections.all.text_alignment.label",
            "default": "center"
        },
        {
            "type": "range",
            "id": "image_overlay_opacity",
            "min": 0,
            "max": 100,
            "step": 10,
            "unit": "%",
            "label": "t:sections.all.image_overlay_opacity.label",
            "default": 30
        },
        {
            "type": "color",
            "id": "color_overlay_opacity",
            "label": "t:sections.all.colors.colors_background",
            "default": "#000000"
        }]
    }],
    "presets": [
    {
        "name": "t:sections.collection-w-product.presets.name",
        "blocks": [
        {
            "type": "slide"
        },
        {
            "type": "slide"
        }]
    }]
}
{% endschema %}