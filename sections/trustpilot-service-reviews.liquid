<div
  class="section__m-page spacing spacing-xs gradient"
  style="
    --padding-top: {{ section.settings.padding_top }}px;
    --padding-bottom: {{ section.settings.padding_bottom }}px;
    --padding-top-xs: {{ section.settings.padding_top_mobile }}px;
    --padding-bottom-xs: {{ section.settings.padding_bottom_mobile }}px;
  "
>
  
  <script>
    var userImage = "{{section.settings.user_image | image_url }}";
    var staffImage = "{{section.settings.staff_image | image_url }}";
  </script>

  <div
    class="{{ section.settings.section_width }} m-auto"
    {% if section.settings.section_width == 'customized-width' %}
      style="--page-width: {{ section.settings.customize_width }}px;"
    {% endif %}
  >
    
    <div id="service-reviews" class="container">
      <div class="row">
        <div id="review-bars" class="col-12 text-center">
          <!-- <div id="reviewAverage" class="col-12"></div> -->
          <div id="reviewCount"></div>

          <div id="loading-indicator" class="mx-auto" style="display:table;">
            <span class="loading-bar d-block pos-relative o-h"></span>
          </div>

          <div id="fiveStars" class="row">
            <div class="col-3 py-1">5 stars</div>
            <div class="col-6 py-1 score-bar-wrapper">
              <div class="score-bar">
                <div id="fiveStarFill" class="score-bar-fill" style="width: 0%;"></div>
              </div>
            </div>
            <div id="fiveStarNumber" class="col-3 py-1"></div>
          </div>

          <div id="fourStars" class="row">
            <div class="col-3 py-1">4 stars</div>
            <div class="col-6 py-1 score-bar-wrapper">
              <div class="score-bar">
                <div id="fourStarFill" class="score-bar-fill" style="width: 0%;"></div>
              </div>
            </div>
            <div id="fourStarNumber" class="col-3 py-1"></div>
          </div>

          <div id="threeStars" class="row">
            <div class="col-3 py-1">3 stars</div>
            <div class="col-6 py-1 score-bar-wrapper">
              <div class="score-bar">
                <div id="threeStarFill" class="score-bar-fill" style="width: 0%;"></div>
              </div>
            </div>
            <div id="threeStarNumber" class="col-3 py-1"></div>
          </div>

          <div id="twoStars" class="row">
            <div class="col-3 py-1">2 stars</div>
            <div class="col-6 py-1 score-bar-wrapper">
              <div class="score-bar">
                <div id="twoStarFill" class="score-bar-fill" style="width: 0%;"></div>
              </div>
            </div>
            <div id="twoStarNumber" class="col-3 py-1"></div>
          </div>

          <div id="oneStar" class="row">
            <div class="col-3 py-1">1 star</div>
            <div class="col-6 py-1 score-bar-wrapper">
              <div class="score-bar">
                <div id="oneStarFill" class="score-bar-fill" style="width: 0%;"></div>
              </div>
            </div>
            <div id="oneStarNumber" class="col-3 py-1"></div>
          </div>

          <!-- Reviews Message -->
          <div id="reviewsMessage" class="col-12 my-5">
            Showing <strong>All Stars</strong> Trustpilot Service Reviews
          </div>

          <!--
            <div id="pagination" class="mt-2">
              <button class="btn btn-secondary page-btn">Pagination</button>
            </div>
          -->
        </div>
      </div>
      <div id="reviews" class="row mt-5" data-masonry='{"percentPosition": true }'></div>
      <div class="row">
        <div class="col-12 text-center">
          <a href="https://uk.trustpilot.com/review/honeypotfurniture.co.uk" target="_blank" class="btn btn-secondary"
            >Read more on Trustpilot.com</a
          >
        </div>
      </div>
    </div>
  </div>
</div>

<script src="{{ 'trustpilot-service-reviews.js' | asset_url }}" defer></script>
{{ 'trustpilot-service-reviews.css' | asset_url | stylesheet_tag }}
{% comment %} <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" defer></script> {% endcomment %}

{% schema %}
{
  "name": "Service Reviews",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "blocks": [],
  "settings": [
    {
      "type": "select",
      "id": "section_width",
      "options": [
        {
          "value": "full-width",
          "label": "t:sections.all.section_width.options__1"
        },
        {
          "value": "page-width",
          "label": "t:sections.all.section_width.options__2"
        },
        {
          "value": "customized-width",
          "label": "t:sections.all.section_width.options__3"
        }
      ],
      "default": "customized-width",
      "label": "t:sections.all.section_width.label"
    },
    {
      "type": "range",
      "id": "customize_width",
      "min": 1000,
      "max": 1800,
      "step": 50,
      "default": 1400,
      "unit": "px",
      "label": "t:sections.all.customize_width.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top_mobile",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom_mobile",
      "default": 0
    },
    {
      "type": "image_picker",
      "id": "user_image",
      "label": "User Image"
    },
    {
      "type": "image_picker",
      "id": "staff_image",
      "label": "Staff Image"
    }
  ],
  "presets": [
    {
      "name": "Service Reviews"
    }
  ]
}
{% endschema %}

{% stylesheet %}
  #service-reviews {
    min-width: 298px;
    #review-bars {
      min-height: 287px;
      #reviewCount {
        min-height: 58px;
      }
    }
    .score-bar-wrapper {
      margin-top: 13px;
    }
    .score-bar {
      background-color: #d6d6d6;
      border-radius: 2px;
      height: 4px;
      margin: 0 12px 0 0;
      width: 100%;
      .score-bar-fill {
        background-color: #00b67a;
        height: 100%;
        display: block;
      }
    }
    .review {
      width: 100%;
    }
    /* Style for the loading indicator */
    #loading-indicator {
      display: ruby;
      position: absolute;
      left: 0;
      width: 100%;
      top: 193px;
      background-color: #fff;
      color: rgba(0, 0, 0, 0.5);
      text-align: center;
      z-index: 1;
      height: 193px;
      .loading-bar {
        position: absolute;
        top: 50%;
        left: 34%;
      }
      @media screen and (min-width: 750px){
        top: 258px;
        .loading-bar {
          top: 50%;
          left: 42%;
        }
      }
      @media screen and (min-width: 990px){
        top: 285px;
        .loading-bar {
          top: 50%;
          left: 46%;
        }
      }
      .spinner-border {
        position: relative;
        top: 20%;
      }
    }
  }
{% endstylesheet %}
