{% comment %}
Pick Your Fabric & Colour Section - Correct Shopify Schema
{% endcomment %}

<section class="fabric-section_main">
  <div class="fabric-header">
    <h2>{{ section.settings.heading_number }}</h2>
    <h3>{{ section.settings.heading }}</h3>
    <p>{{ section.settings.subheading_1 }}</p>
    <p>{{ section.settings.subheading_2 }}</p>
  </div>

  <div class="fabric-grid">
    {% assign fabrics = section.blocks | group_by: 'settings.fabric_id' %}
    {% for fabric in fabrics %}
      <div class="fabric-item" data-fabric-item>
        {% assign main_image = fabric.items | first %}
        <div class="fabric-image">
          <img src="{{ main_image.settings.main_image | image_url: width:500 }}" alt="{{ main_image.settings.fabric_name }}" data-fabric-main-image>
        </div>
        <p>{{ main_image.settings.fabric_name }}</p>

        <div class="fabric-swatches">
          {% for swatch in fabric.items %}
            <span class="fabric-swatch" 
                  style="background-color: {{ swatch.settings.swatch_color }};" 
                  data-swatch-image="{{ swatch.settings.swatch_image | image_url: width:500 }}">
            </span>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Pick Your Fabric & Colour",
  "settings": [
    { "type": "text", "id": "heading_number", "label": "Step Number", "default": "STEP 5" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Pick Your Fabric & Colour" },
    { "type": "text", "id": "subheading_1", "label": "Line 1", "default": "Explore our fabrics." },
    { "type": "text", "id": "subheading_2", "label": "Line 2", "default": "Find the perfect one for you." }
  ],
  "blocks": [
    {
      "type": "fabric_swatch",
      "name": "Fabric Swatch",
      "settings": [
        { "type": "text", "id": "fabric_id", "label": "Fabric ID (same for swatches of same fabric)" },
        { "type": "text", "id": "fabric_name", "label": "Fabric Name" },
        { "type": "image_picker", "id": "main_image", "label": "Main Fabric Image" },
        { "type": "color", "id": "swatch_color", "label": "Swatch Color" },
        { "type": "image_picker", "id": "swatch_image", "label": "Swatch Image" }
      ]
    }
  ],
  "presets": [
    { "name": "Pick Your Fabric & Colour", "category": "Custom" }
  ]
}
{% endschema %}
